// This file is auto-generated by @hey-api/openapi-ts

import { queryOptions, type UseMutationOptions } from "@tanstack/react-query";

import { client } from "../client.gen";
import {
	deleteFoodsById,
	get,
	getFoods,
	type Options,
	postFoods,
	putFoodsById,
} from "../sdk.gen";
import type {
	DeleteFoodsByIdData,
	DeleteFoodsByIdError,
	DeleteFoodsByIdResponse,
	GetData,
	GetFoodsData,
	PostFoodsData,
	PostFoodsError,
	PostFoodsResponse,
	PutFoodsByIdData,
	PutFoodsByIdError,
	PutFoodsByIdResponse,
} from "../types.gen";

export type QueryKey<TOptions extends Options> = [
	Pick<TOptions, "baseUrl" | "body" | "headers" | "path" | "query"> & {
		_id: string;
		_infinite?: boolean;
		tags?: ReadonlyArray<string>;
	},
];

const createQueryKey = <TOptions extends Options>(
	id: string,
	options?: TOptions,
	infinite?: boolean,
	tags?: ReadonlyArray<string>,
): [QueryKey<TOptions>[0]] => {
	const params: QueryKey<TOptions>[0] = {
		_id: id,
		baseUrl:
			options?.baseUrl || (options?.client ?? client).getConfig().baseUrl,
	} as QueryKey<TOptions>[0];
	if (infinite) {
		params._infinite = infinite;
	}
	if (tags) {
		params.tags = tags;
	}
	if (options?.body) {
		params.body = options.body;
	}
	if (options?.headers) {
		params.headers = options.headers;
	}
	if (options?.path) {
		params.path = options.path;
	}
	if (options?.query) {
		params.query = options.query;
	}
	return [params];
};

export const getQueryKey = (options?: Options<GetData>) =>
	createQueryKey("get", options);

/**
 * Get
 */
export const getOptions = (options?: Options<GetData>) => {
	return queryOptions({
		queryFn: async ({ queryKey, signal }) => {
			const { data } = await get({
				...options,
				...queryKey[0],
				signal,
				throwOnError: true,
			});
			return data;
		},
		queryKey: getQueryKey(options),
	});
};

export const getFoodsQueryKey = (options?: Options<GetFoodsData>) =>
	createQueryKey("getFoods", options);

/**
 * Get List Foods
 *
 * Retrieve a list of foods.
 */
export const getFoodsOptions = (options?: Options<GetFoodsData>) => {
	return queryOptions({
		queryFn: async ({ queryKey, signal }) => {
			const { data } = await getFoods({
				...options,
				...queryKey[0],
				signal,
				throwOnError: true,
			});
			return data;
		},
		queryKey: getFoodsQueryKey(options),
	});
};

/**
 * Add new food
 */
export const postFoodsMutation = (
	options?: Partial<Options<PostFoodsData>>,
): UseMutationOptions<
	PostFoodsResponse,
	PostFoodsError,
	Options<PostFoodsData>
> => {
	const mutationOptions: UseMutationOptions<
		PostFoodsResponse,
		PostFoodsError,
		Options<PostFoodsData>
	> = {
		mutationFn: async (fnOptions) => {
			const { data } = await postFoods({
				...options,
				...fnOptions,
				throwOnError: true,
			});
			return data;
		},
	};
	return mutationOptions;
};

/**
 * Delete a food item by its ID
 */
export const deleteFoodsByIdMutation = (
	options?: Partial<Options<DeleteFoodsByIdData>>,
): UseMutationOptions<
	DeleteFoodsByIdResponse,
	DeleteFoodsByIdError,
	Options<DeleteFoodsByIdData>
> => {
	const mutationOptions: UseMutationOptions<
		DeleteFoodsByIdResponse,
		DeleteFoodsByIdError,
		Options<DeleteFoodsByIdData>
	> = {
		mutationFn: async (fnOptions) => {
			const { data } = await deleteFoodsById({
				...options,
				...fnOptions,
				throwOnError: true,
			});
			return data;
		},
	};
	return mutationOptions;
};

/**
 * Update food
 */
export const putFoodsByIdMutation = (
	options?: Partial<Options<PutFoodsByIdData>>,
): UseMutationOptions<
	PutFoodsByIdResponse,
	PutFoodsByIdError,
	Options<PutFoodsByIdData>
> => {
	const mutationOptions: UseMutationOptions<
		PutFoodsByIdResponse,
		PutFoodsByIdError,
		Options<PutFoodsByIdData>
	> = {
		mutationFn: async (fnOptions) => {
			const { data } = await putFoodsById({
				...options,
				...fnOptions,
				throwOnError: true,
			});
			return data;
		},
	};
	return mutationOptions;
};
